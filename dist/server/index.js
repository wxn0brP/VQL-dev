var g={html(n){return n!==void 0?(this.innerHTML=n,this):this.innerHTML},v(n){return n!==void 0?(this.value=n,this):this.value},on(n,e){return this.addEventListener(n,e),this},css(n,e=null){return typeof n=="string"?e!==null?this.style[n]=e:this.style.cssText=n:Object.assign(this.style,n),this},attrib(n,e=null){return e!==null?(this.setAttribute(n,e),this):this.getAttribute(n)||""},clA(...n){return this.classList.add(...n),this},clR(...n){return this.classList.remove(...n),this},clT(n,e){return this.classList.toggle(n,e),this},animateFade(n,e={}){let{time:t=200,cb:r}=e,s=this,i=n===0?1:0,o=Math.min(1,Math.max(0,n)),c=performance.now();s.style.opacity=o.toString();function a(u){let l=u-c,S=Math.min(l/t,1),d=o+(i-o)*S;s.style.opacity=d.toString(),S<1?requestAnimationFrame(a):(s.style.opacity=i.toString(),r?.())}return requestAnimationFrame(a),this},fadeIn(...n){let e=D({display:"string",cb:"function",time:"number"},n),{display:t="block"}=e;return this.css("display",t),this.animateFade(0,e),this.fade=!0,this},fadeOut(...n){let e=D({cb:"function",time:"number"},n),t=e.time??300;return e.time=t,this.animateFade(1,{...e,cb:()=>{this.css("display","none"),e.cb?.()}}),this.fade=!1,this},async fadeInP(...n){return new Promise(e=>{this.fadeIn(...n,()=>e(this))})},async fadeOutP(...n){return new Promise(e=>{this.fadeOut(...n,()=>e(this))})},fade:!0,fadeToggle(){return this.fade?this.fadeOut():this.fadeIn(),this},add(n){return this.appendChild(n),this},addUp(n){return this.insertBefore(n,this.firstChild),this},qs(n,e=0){return e&&(n=`[data-id="${n}"]`),this.querySelector(n)}};g.qi=g.qs;function D(n,e){let t={};if(e.length===0)return t;if(e.every(r=>typeof r=="object"))return Object.assign({},...e);for(let r of e)for(let[s,i]of Object.entries(n))if(typeof r===i){t[s]=r;break}return t}Object.assign(HTMLElement.prototype,g);Object.assign(document,g);Object.assign(document.body,g);Object.assign(document.documentElement,g);window.qs=window.qi=g.qs.bind(document);function T(n,e){return Object.keys(e).every(r=>n[r]!==void 0?typeof e[r]=="object"&&e[r]!==null?T(n[r],e[r]):n[r]===e[r]:!1)}function A(n){return parseInt(n.split("-")[0],36)}function _(n,e){if(typeof n=="string"&&typeof e=="string")return A(n)-A(e)||n.localeCompare(e);if(typeof n=="number"&&typeof e=="number")return n-e;let t=typeof n=="string"?A(n):n,r=typeof e=="string"?A(e):e;return t-r}function h(n,e){if(typeof e!="object"||e===null)throw new Error("Fields must be an object");if(Object.keys(e).length===0)return!0;if("$and"in e)return e.$and.every(s=>h(n,s));if("$or"in e)return e.$or.some(s=>h(n,s));let t={},r={};return Object.keys(e).forEach(s=>{s.startsWith("$")?t[s.toLowerCase()]=e[s]:r[s]=e[s]}),xe(n,t)?Object.keys(r).length?T(n,r):!0:!1}function xe(n,e){return ve(n,e)&&Ae(n,e)&&_e(n,e)}function ve(n,e){return Ce(e,n,{gt:(t,r)=>t>r,lt:(t,r)=>t<r,gte:(t,r)=>t>=r,lte:(t,r)=>t<=r,in:(t,r)=>r.includes(t),nin:(t,r)=>!r.includes(t),type:(t,r)=>typeof t===r,exists:(t,r,s)=>!(r&&!(s in n)||!r&&s in n),regex:(t,r)=>(typeof r=="string"?new RegExp(r):r).test(t),size:(t,r)=>Array.isArray(t)||typeof t=="string"?t.length===r:!1,startswith:(t,r)=>typeof t=="string"&&t.startsWith(r),endswith:(t,r)=>typeof t=="string"&&t.endsWith(r),between:(t,[r,s])=>typeof t=="number"&&t>=r&&t<=s,arrinc:(t,r)=>Array.isArray(t)&&r.some(s=>t.includes(s)),arrincall:(t,r)=>Array.isArray(t)&&r.every(s=>t.includes(s)),idgt:(t,r)=>_(t,r)>0,idlt:(t,r)=>_(t,r)<0,idgte:(t,r)=>_(t,r)>=0,idlte:(t,r)=>_(t,r)<=0})}function Ae(n,e){return"$not"in e?!h(n,e.$not):!0}function _e(n,e){if("$subset"in e){let t=e.$subset;return T(n,t)}return!0}function Ce(n,e,t){for(let[r,s]of Object.entries(t)){let i="$"+r;if(i in n)for(let[o,c]of Object.entries(n[i])){let a=e?.[o];if(typeof c=="object"&&c!==null&&!Array.isArray(c)){if(!ee(c,a,s))return!1}else if(!s(a,c,o))return!1}}return!0}function ee(n,e,t){if(typeof e!="object"||e===null)return!1;for(let[r,s]of Object.entries(n)){let i=e[r];if(typeof s=="object"&&s!==null&&!Array.isArray(s)){if(!ee(s,i,t))return!1}else if(!t(i,s,r))return!1}return!0}function N(n,e){let{transform:t,select:r,exclude:s}=e;return typeof t=="function"&&(n=t(n)),Array.isArray(s)&&s.forEach(i=>{n.hasOwnProperty(i)&&delete n[i]}),Array.isArray(r)&&(n=r.reduce((i,o)=>(n.hasOwnProperty(o)&&(i[o]=n[o]),i),{})),n}function j(n,...e){if(!e.length)return n;let t=e.shift();if(n||(n={}),Q(n)&&Q(t))for(let r in t)Q(t[r])?(n[r]||Object.assign(n,{[r]:{}}),j(n[r],t[r])):Object.assign(n,{[r]:t[r]});return j(n,...e)}function Q(n){return n&&typeof n=="object"&&!Array.isArray(n)}function te(n,e){if(typeof e!="object"||e===null)throw new Error("Fields must be an object or object array");if(Object.keys(e).length===0)return n;let t=structuredClone(n),r={},s={};Object.keys(e).forEach(o=>{o.startsWith("$")?r[o.toLowerCase()]=e[o]:s[o]=e[o]}),Ee(t,r);let i=Ie(t,r);return Me(i,s),i}function Ie(n,e){return"$deepmerge"in e?Object.keys(n).length===0?e.$deepmerge:(j(n,e.$deepmerge),n):n}function Ee(n,e){ke(e,n,{push:(t,r)=>Array.isArray(t)?(t.push(r),t):[r],pushall:(t,r)=>Array.isArray(t)?(t.push(...r),t):r,pushset:(t,r)=>Array.isArray(t)?(t.push(r),[...new Set(t)]):[r],pull:(t,r)=>{if(Array.isArray(t))return t.filter(s=>s!==r)},pullall:(t,r)=>{if(Array.isArray(t))return t.filter(s=>!r.includes(s))},merge:(t,r)=>typeof t=="object"&&typeof r=="object"?(Object.assign(t,r),t):r,inc:(t,r,s,i)=>{if(typeof t=="number"&&typeof r=="number")return t+r;if(!(s in i))return r;throw new Error(`Cannot increment non-numeric value at key: ${s}`)},dec:(t,r,s,i)=>{if(typeof t=="number"&&typeof r=="number")return t-r;if(!(s in i))return-r;throw new Error(`Cannot decrement non-numeric value at key: ${s}`)},rename:(t,r,s,i)=>{s in i&&(i[r]=i[s],delete i[s])},set:(t,r)=>r,unset:(t,r,s,i)=>{s in i&&delete i[s]}})}function Me(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function ke(n,e,t){for(let[r,s]of Object.entries(t)){let i="$"+r;if(i in n)for(let[o,c]of Object.entries(n[i]))if(typeof c=="object"&&c!==null&&!Array.isArray(c))e[o]||(e[o]={}),ne(c,e[o],s);else{let a=s(e?.[o],c,o,e);a!==void 0&&(e[o]=a)}}}function ne(n,e,t){for(let[r,s]of Object.entries(n))if(typeof s=="object"&&s!==null&&!Array.isArray(s))e[r]||(e[r]={}),ne(s,e[r],t);else{let i=t(e[r],s,r,e);i!==void 0&&(e[r]=i)}}function C(n){return n.replaceAll("//","/")}var I=class{_readFile;_writeFile;constructor(e,t){this._readFile=e,this._writeFile=t}async add(e,t){e=C(e);let r=await this._readFile(e);r.push(t),await this._writeFile(e,r)}async find(e,t,r={},s={}){e=C(e);let o=(await this._readFile(e)).filter(c=>typeof t=="function"?t(c,r):h(c,t));return o.length?o.map(c=>N(c,s)):[]}async findOne(e,t,r={},s={}){e=C(e);let o=(await this._readFile(e)).find(c=>typeof t=="function"?t(c,r):h(c,t));return o?N(o,s):!1}async remove(e,t,r,s={}){e=C(e);let i=await this._readFile(e),o=[];return i=i.filter(c=>o.length&&t?!0:(typeof r=="function"?r(c,s):h(c,r))?(o.push(c),!1):!0),o.length&&await this._writeFile(e,i),o}async update(e,t,r,s,i={}){e=C(e);let o=await this._readFile(e),c=[];return o=o.map(a=>{if(c.length&&t)return a;if(typeof r=="function"?r(a,i):h(a,r)){let l=typeof s=="function"?s(a,i):te(a,s);return c.push(l),l}return a}),c.length&&await this._writeFile(e,o),c}};function Se(){return{usedIds:new Map,lastId:void 0,recentIdsTimestamps:[],startIndex:0,lastGeneratedMs:0,lastRandomValue:0}}var Fe=Se();function W(n=null,e=Fe){n===null&&(n=[1,1]);let t=se();return Te({time:t,partsSchema:n,s:0},e)}function Te(n,e){for(;;){let t=0;if(e.lastId){let c=e.lastId.split("-");if(c.shift()===n.time){let u=c.join("");t=parseInt(u,36)+1}}let r=n.partsSchema.reduce((c,a)=>c+a,0),s=Le(t,r,e),i=$e(n.partsSchema,s),o=[n.time,...i].join("-");if(!e.usedIds.has(o))return e.usedIds.set(o,!0),setTimeout(()=>e.usedIds.delete(o),1e3),e.lastId=o,o;n.s++,n.s>=r&&(n.time=se(),n.s=0)}}function je(n){let e=Date.now();for(n.recentIdsTimestamps.push(e);n.startIndex<n.recentIdsTimestamps.length&&n.recentIdsTimestamps[n.startIndex]<e-1;)n.startIndex++;return n.recentIdsTimestamps.length-n.startIndex}function Le(n,e,t){let r=Math.pow(36,e)-1,s=je(t),i=Date.now();if(s<3||i!==t.lastGeneratedMs)t.lastRandomValue=re(n,r),t.lastGeneratedMs=i;else{let o=Math.random();o<.6?t.lastRandomValue+=1:o<.9?t.lastRandomValue+=2:t.lastRandomValue=re(t.lastRandomValue,r)}return t.lastRandomValue.toString(36).padStart(e,"0")}function re(n,e){let t=n,r=Math.pow(Math.random(),3);return t=Math.floor(n+(e-n)*r),Math.min(t,e)}function $e(n,e){let t=0;return n.map(r=>e.slice(t,t+=r))}function se(){return new Date().getTime().toString(36)}async function ie(n,e,t=!0){let{collection:r,data:s}=n;if(!(n.id_gen??t)||s._id)return s;let{numberId:o}=e;if(!o){s._id=W();return}let c=await e.findOne({collection:"__vdb_id",search:{c:r}});s._id=c?.i?c.i+1:1,await e.updateOneOrAdd({collection:"__vdb_id",search:{c:r},updater:{$inc:{i:1}},id_gen:!1})}function oe(n,e){if(n==null&&e!=null)return 1;if(n!=null&&e==null)return-1;if(n==null&&e==null)return 0;let t=typeof n,r=typeof e;return t==="string"&&r==="string"?n.localeCompare(e):(t==="number"||n instanceof Date)&&(r==="number"||e instanceof Date)?n<e?-1:n>e?1:0:t==="boolean"&&r==="boolean"?n===e?0:n?1:-1:0}async function ce(n,e,t){let{search:r,context:s={},dbFindOpts:i={},findOpts:o={}}=n,{reverse:c=!1,offset:a=0,limit:u=-1,sortBy:l,sortAsc:S=!0}=i;c&&!l&&t.reverse();let d=[],v=0,F=0;for(let z of t){let f=await e.find(z,r,s,o);if(c&&!l&&f.reverse(),l)d.push(...f);else{if(a>F){let O=a-F;if(f.length<=O){F+=f.length;continue}f=f.slice(O),F=a}if(u!==-1)if(v+f.length>u){let O=u-v;f=f.slice(0,O),v=u}else v+=f.length;if(d.push(...f),u!==-1&&v>=u)break}}if(l){if(l==="random()")d.sort(()=>Math.random()-.5);else{let O=S?1:-1;d.sort((be,Oe)=>oe(be[l],Oe[l])*O)}let z=a,f=u!==-1?a+u:void 0;d=d.slice(z,f)}return d}function E(n){if(!n)return{};if(typeof n!="object"||Array.isArray(n))return{};if(Object.keys(n).length===0)return{};let e={};for(let t of Object.keys(n)){if(!t.startsWith("$")){e[t]=n[t];continue}let r=n[t];Array.isArray(r)||Object.keys(r).forEach(s=>e[s]=r[s])}return e}function ae(n){n.data=Object.assign({},E(n.search),E(n.updater),E(n.add_arg))}function ue(n){n.data=Object.assign({},E(n.search),E(n.data))}var L=class{_inited=!0;numberId=!1;async init(...e){}async updateOneOrAdd(e){let t=await this.updateOne(e);return t?{data:t,type:"updated"}:(ae(e),{data:await this.add(e),type:"added"})}async toggleOne(e){let t=await this.removeOne(e);return t?{data:t,type:"removed"}:(ue(e),{data:await this.add(e),type:"added"})}};var $=class extends L{fileCpu;constructor(){super()}async add(e){await this.ensureCollection(e),await ie(e,this);let{collection:t,data:r}=e;return await this.fileCpu.add(t,r),r}async find(e){return await this.ensureCollection(e),await ce(e,this.fileCpu,[e.collection])}async findOne({collection:e,search:t,context:r={},findOpts:s={}}){return await this.ensureCollection(arguments[0]),await this.fileCpu.findOne(e,t,r,s)||null}async update({collection:e,search:t,updater:r,context:s={}}){return await this.ensureCollection(arguments[0]),await this.fileCpu.update(e,!1,t,r,s)}async updateOne({collection:e,search:t,updater:r,context:s={}}){await this.ensureCollection(arguments[0]);let i=await this.fileCpu.update(e,!0,t,r,s);return i.length?i[0]:null}async remove({collection:e,search:t,context:r={}}){return await this.ensureCollection(arguments[0]),await this.fileCpu.remove(e,!1,t,r)}async removeOne({collection:e,search:t,context:r={}}){await this.ensureCollection(arguments[0]);let s=await this.fileCpu.remove(e,!0,t,r);return s.length?s[0]:null}};var m=class{db;collection;constructor(e,t){this.db=e,this.collection=t}add(e,t){return this.db.add({collection:this.collection,data:e,id_gen:t})}find(e={},t={},r={},s={}){return this.db.find({collection:this.collection,search:e,dbFindOpts:t,findOpts:r,context:s})}findOne(e={},t={},r={}){return this.db.findOne({collection:this.collection,search:e,findOpts:t,context:r})}update(e,t,r={}){return this.db.update({collection:this.collection,search:e,updater:t,context:r})}updateOne(e,t,r={}){return this.db.updateOne({collection:this.collection,search:e,updater:t,context:r})}remove(e,t={}){return this.db.remove({collection:this.collection,search:e,context:t})}removeOne(e,t={}){return this.db.removeOne({collection:this.collection,search:e,context:t})}updateOneOrAdd(e,t,{add_arg:r={},context:s={},id_gen:i=!0}={}){return this.db.updateOneOrAdd({collection:this.collection,search:e,updater:t,add_arg:r,context:s,id_gen:i})}toggleOne(e,t={},r={}){return this.db.toggleOne({collection:this.collection,search:e,data:t,context:r})}};function R(n){return le(n)}function le(n){return new Proxy(n,{get(e,t,r){if(t in e)return Reflect.get(e,t,r);let s=new m(e,t);return e[t]=s,s},set(e,t,r,s){return Reflect.set(e,t,r,s)}})}var V=class{_events={};on(e,t){let r=e;this._events[r]||(this._events[r]=[]),this._events[r].push(t)}once(e,t){let r=(...s)=>{this.off(e,r),t(...s)};this.on(e,r)}off(e,t){let r=e;this._events[r]&&(this._events[r]=this._events[r].filter(s=>s!==t))}_emit(e,...t){let r=this._events[e];r?.length&&r.forEach(s=>s(...t))}emit(e,...t){this._emit(e,...t),this._emit("*",e,...t)}listenerCount(e){return this._events[e]?.length||0}};var P=class{quote;isExecuting;constructor(){this.quote=[],this.isExecuting=!1}async addOp(e,...t){return await new Promise((r,s)=>{this.quote.push({func:e,param:t,resolve:r,reject:s}),this.execute()})}async execute(){if(!this.isExecuting){for(this.isExecuting=!0;this.quote.length>0;){let e=this.quote.shift(),t=await e.func(...e.param);e.resolve(t)}this.isExecuting=!1}}};var fe="0.9.0";var M=class{dbAction;executor;emiter=new V;version=fe;constructor(e){this.dbAction=e.dbAction,this.executor=e.executor||new P,e.numberId&&(this.dbAction.numberId=!0)}async init(...e){if(this.dbAction._inited)return;let t=this;return await this.executor.addOp(async()=>{t.dbAction._inited||(await t.dbAction.init(...e),t.dbAction._inited=!0)})}async execute(e,t){await this.init();let r=await this.executor.addOp(this.dbAction[e].bind(this.dbAction),t);return this.emiter.emit(e,t,r),r}c(e){return new m(this,e)}async getCollections(){return await this.execute("getCollections",{})}async ensureCollection(e){return await this.execute("ensureCollection",{collection:e})}async issetCollection(e){return await this.execute("issetCollection",{collection:e})}add(e){return e.control||={},e.id_gen??=!0,this.execute("add",e)}find(e){return e.search||={},e.dbFindOpts||={},e.findOpts||={},e.context||={},e.control||={},this.execute("find",e)}findOne(e){return e.findOpts||={},e.context||={},e.control||={},this.execute("findOne",e)}update(e){return e.context||={},e.control||={},this.execute("update",e)}updateOne(e){return e.context||={},e.control||={},this.execute("updateOne",e)}remove(e){return e.context||={},e.control||={},this.execute("remove",e)}removeOne(e){return e.context||={},e.control||={},this.execute("removeOne",e)}updateOneOrAdd(e){return e.context||={},e.add_arg||={},e.control||={},e.id_gen??=!0,this.execute("updateOneOrAdd",e)}toggleOne(e){return e.data||={},e.context||={},e.control||={},this.execute("toggleOne",e)}removeCollection(e){return this.execute("removeCollection",{collection:e})}};var J=class extends ${memory;constructor(){super(),this.fileCpu=new I(this._readMemory.bind(this),this._writeMemory.bind(this)),this.memory=new Map}_readMemory(e){return this.memory.has(e)?this.memory.get(e):[]}_writeMemory(e,t){this.memory.set(e,t)}async getCollections(){return Array.from(this.memory.keys())}async ensureCollection({collection:e}){if(!this.issetCollection(e))return this.memory.set(e,[]),!0}async issetCollection({collection:e}){return this.memory.has(e)}async removeCollection({collection:e}){return this.memory.delete(e),!0}},U=class extends M{constructor(...e){super({dbAction:new J})}};function K(n){let e=new U;if(!n)return R(e);for(let t of Object.keys(n))e.dbAction.memory.set(t,n[t]);return R(e)}import Re from"@wxn0brp/vql";var w=K(),b=new Re({db:w});var G=new BroadcastChannel("VQL");function Ve(n,e){let t=e.version;return n==="local"?t+="-local.0":t+="-client.0",{logic_id:n,type:"valthera",version:t}}function Pe(){let n=[];for(let[e,t]of Object.entries(b.dbInstances))n.push(Ve(e,t));return n}G.onmessage=async n=>{let e=n.data.data,t=n.data.type;if(console.log(t,e),t==="getAdapters")G.postMessage({type:"getAdapters",data:Pe()});else if(t==="vql"){let r=e.id;typeof e.query=="string"&&console.log("->",b._parseQuery(e.query));let s=await b.execute(e.query,{});G.postMessage({type:"vql-"+r,data:s})}};function de(n){let e=[];function t(s){return typeof s=="function"?s.toString():s}function r(s,i=""){Object.keys(s).forEach(o=>{let c=s[o],a=i?`${i}.${o.replace(/\./g,"[dot]")}`:o;typeof c=="function"?(e.push(a),s[o]=t(c)):Array.isArray(c)?c.forEach((u,l)=>{typeof u=="function"&&(e.push(`${a}[${l}]`),c[l]=t(u))}):typeof c=="object"&&c!==null&&r(c,a)})}return r(n),{data:n,keys:e}}var pe="0.4.4";var q=class{remote;version=pe;constructor(e){if(typeof e=="string"){let t=new URL(e),r=t.username,s=t.password;if(!r||!s)throw new Error("Invalid remote database");t.username="",t.password="";let i=t.toString().slice(0,-1);this.remote={name:r,url:i,auth:s}}else this.remote=e;this.remote.url.endsWith("/")&&(this.remote.url=this.remote.url.slice(0,-1))}async _request(e,t=[]){let r=de(t),s={db:this.remote.name,params:r.data,keys:r.keys},i=this.remote.url+"/db/"+e,o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.remote.auth},body:JSON.stringify(s)}).then(c=>c.json());if(o.err)throw new Error(o.msg);return o.result}c(e){return new m(this,e)}getCollections(){return this._request("getCollections",[])}ensureCollection(e){return this._request("ensureCollection",[e])}issetCollection(e){return this._request("issetCollection",[e])}add(e){return this._request("add",[e])}find(e){return this._request("find",[e])}findOne(e){return this._request("findOne",[e])}update(e){return this._request("update",[e])}updateOne(e){return this._request("updateOne",[e])}remove(e){return this._request("remove",[e])}removeOne(e){return this._request("removeOne",[e])}updateOneOrAdd(e){return this._request("updateOneOrAdd",[e])}toggleOne(e){return this._request("toggleOne",[e])}removeCollection(e){return this._request("removeCollection",[e])}};var y=qs("textarea"),X=qs("ul"),k=qs("#memory-db");qs("#run").addEventListener("click",()=>B());y.addEventListener("keyup",n=>{n.shiftKey&&n.key==="Enter"&&B()});qs("#save").addEventListener("click",()=>{let n=y.value;localStorage.setItem("vql-server-config",n)});function he(){let n=w.dbAction;k.value=JSON.stringify(Object.fromEntries(n.memory.entries()),null,2)}function Y(){try{let n=w.dbAction,e=JSON.parse(k.value);n.memory=new Map(Object.entries(e))}catch(n){console.error(n)}}setTimeout(()=>{let n=localStorage.getItem("vql-server-config");n&&(y.value=n,B()),he()},100);k.addEventListener("input",()=>Y());k.addEventListener("change",()=>Y());w.emiter.on("*",()=>he());qs("#memory-db-load-preset").addEventListener("click",async()=>{let n=await fetch("example.json").then(e=>e.json());k.value=JSON.stringify(n,null,2),Y()});var H=qi("#alias"),x=qs("#alias-select"),me=qi("#name"),ye=qi("#auth"),ge=qi("#url");function Z(){let n=Object.keys(p);x.innerHTML="";let e=document.createElement("option");e.value="",e.text="Add",x.add(e);for(let t of n){let r=document.createElement("option");r.value=t,r.text=t,x.add(r)}}function we(n){if(!p[n])return;let e=new URL(p[n]);x.value=n,H.value=n,me.value=e.username,ye.value=e.password,ge.value=e.origin}H.addEventListener("change",()=>we(H.value));x.addEventListener("change",()=>we(x.value));qs("form").addEventListener("submit",n=>{n.preventDefault();let e=H.value,t=new URL(ge.value);t.username=me.value,t.password=ye.value,y.value=y.value.split(`
`).map(r=>r.trim()&&r.split(" ")[0]===e?`${e} ${t.href}`:r).join(`
`),Z()});var p={};function Ue(n){let e={};for(let[t,r]of Object.entries(n))e[t]=new q(r);e.local=w,b.dbInstances=e,b.relation.dbs=e}function qe(){p={};let n=y.value.split(`
`);for(let e of n){if(!e)continue;let[t,r]=e.split(" ");p[t]=r}}async function B(){qe(),Ue(p),X.innerHTML="<li>local: OK</li>",Object.keys(p).forEach(async e=>{let t=p[e],r=new URL(t),s=r.username,i=r.password;r.password="",r.username="";let o=!1;try{await fetch(r+"/db/getCollections",{method:"POST",headers:{"Content-Type":"application/json",Authorization:i},body:JSON.stringify({db:s})}),o=!0}catch{o=!1}let c=document.createElement("li");c.textContent=`${e}: ${o?"OK":"ERR"}`,X.appendChild(c)}),Z()}
//# sourceMappingURL=index.js.map
